<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.enlightenseries.DomainDictionary.infrastructure.datasource.domain.DomainMapper">
  <select id="selectAll" resultType="org.enlightenseries.DomainDictionary.domain.model.domain.Domain">
    SELECT
      id,
      name,
      format,
      description,
      existential,
      created,
      updated
    FROM
      domain
  </select>
  <select id="select" parameterType="Long" resultType="org.enlightenseries.DomainDictionary.domain.model.domain.Domain">
    SELECT
      id,
      name,
      format,
      description,
      existential,
      created,
      updated
    FROM
      domain
    WHERE
      id=#{id}
  </select>
  <select id="selectMetaUser" parameterType="Long" resultType="org.enlightenseries.DomainDictionary.infrastructure.datasource.domain.dao.DomainMetaUser">
    SELECT
      id,
      created_by,
      updated_by
    FROM
      domain_meta_user
    WHERE
      id=#{id}
  </select>
  <select id="selectSummary" parameterType="Long" resultType="org.enlightenseries.DomainDictionary.domain.model.domain.DomainSummary">
    SELECT
      id,
      name
    FROM
      domain
    WHERE
      id=#{id}
  </select>
  <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="org.enlightenseries.DomainDictionary.domain.model.domain.Domain">
    INSERT INTO domain (
      name,
      format,
      description,
      existential,
      created,
      updated
    ) values (
      #{name},
      #{format},
      #{description},
      #{existential},
      #{created},
      #{updated}
    )
  </insert>
  <update id="update">
    UPDATE
      domain
    SET
      name=#{domain.name},
      format=#{domain.format},
      description=#{domain.description},
      existential=#{domain.existential},
      updated=#{domain.updated}
    WHERE
      id=#{id}
  </update>
  <delete id="delete">
    DELETE FROM
      domain
    WHERE
      id=#{id}
  </delete>
  <insert id="createTable">
    CREATE TABLE domain (
      id IDENTITY
      ,name TEXT NOT NULL
      ,format TEXT
      ,description TEXT
      ,existential TEXT
      ,created TIMESTAMP
      ,updated TIMESTAMP
    )
  </insert>
  <insert id="createTableMetaUser">
    CREATE TABLE domain_meta_user (
      id IDENTITY,
      created_by BIGINT,
      updated_by BIGINT
    )
  </insert>
  <select id="exportAll" resultType="org.enlightenseries.DomainDictionary.domain.model.domain.Domain">
    SELECT
      id,
      name,
      format,
      description,
      existential,
      created,
      updated
    FROM
      domain
  </select>
  <delete id="deleteAllForImport">
    DELETE FROM
      domain
  </delete>
  <insert id="insertForImport" parameterType="org.enlightenseries.DomainDictionary.domain.model.domain.Domain">
    INSERT INTO domain (
      id,
      name,
      format,
      description,
      existential,
      created,
      updated
    ) values (
      #{id},
      #{name},
      #{format},
      #{description},
      #{existential},
      #{created},
      #{updated}
    )
  </insert>
</mapper>
